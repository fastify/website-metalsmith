<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>How to write a good plugin</title><meta name=description content="Fast and low overhead web framework, for Node.js"><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.ed24c0a19503e080.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.60c285c424d50738.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-icon-72x72.e49b27cfe1ab1461.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.752f43fc91b8c1f7.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-icon-114x114.61739fa1d5a7059a.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.7c25de37c5ce2ec1.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-icon-144x144.04d88fb27bd92cbe.png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-icon-152x152.9364781175671626.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-icon-180x180.67579100928bfcd2.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.37eb7f1ae3853740.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.1e22f0e774bc3cce.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.7e8a68b1b80c1799.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.e534ce05cb727f1a.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-TileImage content=/images/ms-icon-144x144.png><meta name=theme-color content=#ffffff><meta property=og:url content=https://www.fastify.io/docs/v1.14.x/Write-Plugin><meta property=og:type content=website><meta property=og:title content="How to write a good plugin"><meta property=og:description content="Fast and low overhead web framework, for Node.js"><meta property=og:image content=https://www.fastify.io/images/fastify-fb-share-image.07b6e6860853c758.png><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@fastifyjs><meta name=twitter:creator content=@fastifyjs><meta name=twitter:title content="How to write a good plugin"><meta name=twitter:description content="Fast and low overhead web framework, for Node.js"><meta name=twitter:image content=https://www.fastify.io/images/fastify-twitter-share-image.cd9f217b360af3e2.png><link rel=stylesheet href=/css/style.7179b560fd495c86.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css crossorigin=anonymous></head><body><nav id=main-navbar class=navbar><div class=navbar-brand><a class=navbar-item href=/ ><img src=/images/fastify-logo-menu.d13f8da7a965c800.png alt="Fastify: Fast and low overhead web framework, for Node.js" height=28> </a><a class="navbar-item is-hidden-desktop" href=https://github.com/fastify/fastify target=_blank rel=noopener><span class=icon style="color: #333;"><i class="fa fa-github"></i></span></a><div class="navbar-burger burger" data-target=mobileMenu><span></span> <span></span> <span></span></div></div><div class=navbar-menu id=mobileMenu><div class=navbar-start><a class=navbar-item href=/ >Home</a> <a class=navbar-item href=/docs/latest>Docs</a> <a class=navbar-item href=/ecosystem>Ecosystem</a> <a class=navbar-item href=/benchmarks>Benchmarks</a> <a class=navbar-item href=/contribute>Contribute</a> <a class=navbar-item href=https://medium.com/@fastifyjs/ >Blog</a> <a class=navbar-item href=https://github.com/fastify/help>Help</a></div><div class=navbar-end><span class="control has-icons-left navbar-item"><input id=algolia-search-input class=input type=search placeholder=""> <span class="icon is-medium is-left"><i class="fa fa-search"></i> </span></span><a class=navbar-item href=https://github.com/fastify/fastify target=_blank rel=noopener><span class="fa fa-github"></span>&nbsp;GitHub </a><a class=navbar-item href=https://twitter.com/fastifyjs target=_blank rel=noopener><span class="fa fa-twitter"></span>&nbsp;Twitter</a></div></div></nav><main class=page-content aria-label=Content><section class="hero is-primary" style="background-image: url(/images/bg-pattern-dark.3f8cda863b3bbf52.png)"><div class=hero-body><div class=container><h1 class=title>Documentation (v1.14.6)</h1></div></div></section><section class=section><div class=container><div class=columns><div class="column is-3 is-hidden-mobile" data-sticky-container><aside class="menu sticky"><p class=menu-label>Table of contents</p><ul class=menu-list><li><a title="Getting Started" href=/docs/v1.14.x/Getting-Started>Getting Started</a></li><li><a title=Server href=/docs/v1.14.x/Server>Server</a></li><li><a title=Routes href=/docs/v1.14.x/Routes>Routes</a></li><li><a title=Logging href=/docs/v1.14.x/Logging>Logging</a></li><li><a title=Middlewares href=/docs/v1.14.x/Middlewares>Middlewares</a></li><li><a title=Hooks href=/docs/v1.14.x/Hooks>Hooks</a></li><li><a title=Decorators href=/docs/v1.14.x/Decorators>Decorators</a></li><li><a title="Validation and Serialization" href=/docs/v1.14.x/Validation-and-Serialization>Validation and Serialization</a></li><li><a title=Lifecycle href=/docs/v1.14.x/Lifecycle>Lifecycle</a></li><li><a title=Reply href=/docs/v1.14.x/Reply>Reply</a></li><li><a title=Request href=/docs/v1.14.x/Request>Request</a></li><li><a title="Error Handling" href=/docs/v1.14.x/Error-Handling>Error Handling</a></li><li><a title="Content Type Parser" href=/docs/v1.14.x/ContentTypeParser>Content Type Parser</a></li><li><a title=Plugins href=/docs/v1.14.x/Plugins>Plugins</a></li><li><a title=Testing href=/docs/v1.14.x/Testing>Testing</a></li><li><a title=Benchmarking href=/docs/v1.14.x/Benchmarking>Benchmarking</a></li><li id=doc-menu-section><a title="How to write a good plugin" class=is-active href=/docs/v1.14.x/Write-Plugin>How to write a good plugin</a></li><li><a title="Plugins Guide" href=/docs/v1.14.x/Plugins-Guide>Plugins Guide</a></li><li><a title=HTTP2 href=/docs/v1.14.x/HTTP2>HTTP2</a></li><li><a title="Long Term Support" href=/docs/v1.14.x/LTS>Long Term Support</a></li><li><a title="TypeScript and types support" href=/docs/v1.14.x/TypeScript>TypeScript and types support</a></li></ul><div class=content style="margin: .8em; border-top: 1px solid #ccc; padding: .8em 0 0 0">Docs version<div class=field><div class=control><div class=select><select onchange="if (this.value) window.location.href=this.value"><option value=/docs/latest>latest</option><option value=/docs/master>master</option><option value=/docs/v3.12.x>v3.12.x</option><option value=/docs/v3.11.x>v3.11.x</option><option value=/docs/v3.10.x>v3.10.x</option><option value=/docs/v3.9.x>v3.9.x</option><option value=/docs/v3.8.x>v3.8.x</option><option value=/docs/v3.7.x>v3.7.x</option><option value=/docs/v3.6.x>v3.6.x</option><option value=/docs/v3.5.x>v3.5.x</option><option value=/docs/v3.4.x>v3.4.x</option><option value=/docs/v3.3.x>v3.3.x</option><option value=/docs/v3.2.x>v3.2.x</option><option value=/docs/v3.1.x>v3.1.x</option><option value=/docs/v3.0.x>v3.0.x</option><option value=/docs/v2.15.x>v2.15.x</option><option value=/docs/v2.14.x>v2.14.x</option><option value=/docs/v2.13.x>v2.13.x</option><option value=/docs/v2.12.x>v2.12.x</option><option value=/docs/v2.11.x>v2.11.x</option><option value=/docs/v2.10.x>v2.10.x</option><option value=/docs/v2.9.x>v2.9.x</option><option value=/docs/v2.8.x>v2.8.x</option><option value=/docs/v2.7.x>v2.7.x</option><option value=/docs/v2.6.x>v2.6.x</option><option value=/docs/v2.5.x>v2.5.x</option><option value=/docs/v2.4.x>v2.4.x</option><option value=/docs/v2.3.x>v2.3.x</option><option value=/docs/v2.2.x>v2.2.x</option><option value=/docs/v2.1.x>v2.1.x</option><option value=/docs/v2.0.x>v2.0.x</option><option selected value=/docs/v1.14.x>v1.14.x</option><option value=/docs/v1.13.x>v1.13.x</option></select></div></div></div></div></aside></div><div class="column is-9"><nav class=breadcrumb><ul><li><a href=/ style="padding-left: 0">Fastify</a></li><li><a href=/docs/ >Documentation</a></li><li><div class=field><div class=control><div class=select><select onchange="if (this.value) window.location.href=this.value" style="border: none;"><option value=/docs/latest>latest</option><option value=/docs/master>master</option><option value=/docs/v3.12.x>v3.12.x</option><option value=/docs/v3.11.x>v3.11.x</option><option value=/docs/v3.10.x>v3.10.x</option><option value=/docs/v3.9.x>v3.9.x</option><option value=/docs/v3.8.x>v3.8.x</option><option value=/docs/v3.7.x>v3.7.x</option><option value=/docs/v3.6.x>v3.6.x</option><option value=/docs/v3.5.x>v3.5.x</option><option value=/docs/v3.4.x>v3.4.x</option><option value=/docs/v3.3.x>v3.3.x</option><option value=/docs/v3.2.x>v3.2.x</option><option value=/docs/v3.1.x>v3.1.x</option><option value=/docs/v3.0.x>v3.0.x</option><option value=/docs/v2.15.x>v2.15.x</option><option value=/docs/v2.14.x>v2.14.x</option><option value=/docs/v2.13.x>v2.13.x</option><option value=/docs/v2.12.x>v2.12.x</option><option value=/docs/v2.11.x>v2.11.x</option><option value=/docs/v2.10.x>v2.10.x</option><option value=/docs/v2.9.x>v2.9.x</option><option value=/docs/v2.8.x>v2.8.x</option><option value=/docs/v2.7.x>v2.7.x</option><option value=/docs/v2.6.x>v2.6.x</option><option value=/docs/v2.5.x>v2.5.x</option><option value=/docs/v2.4.x>v2.4.x</option><option value=/docs/v2.3.x>v2.3.x</option><option value=/docs/v2.2.x>v2.2.x</option><option value=/docs/v2.1.x>v2.1.x</option><option value=/docs/v2.0.x>v2.0.x</option><option selected value=/docs/v1.14.x>v1.14.x</option><option value=/docs/v1.13.x>v1.13.x</option></select></div></div></div></li><li class=is-active><a>How to write a good plugin</a></li></ul></nav><div id=doc-content class=content><h1 id=how-to-write-a-good-plugin>How to write a good plugin</h1><p>First, thank you for deciding to write a plugin for Fastify. Fastify is a minimal framework and plugins are its strength, so thank you.<br>The core principles of Fastify are performance, low overhead and providing a good experience to our users. When writing a plugin, it is important to keep these principles in mind. Therefore, in this document we will analyze what characterizes a quality plugin.</p><p><em>Need some inspiration? You can use the label <a href="https://github.com/fastify/fastify/issues?q=is%3Aissue+is%3Aopen+label%3A%22plugin+suggestion%22">&quot;plugin suggestion&quot;</a> in our issue tracker!</em></p><h2 id=code>Code</h2><p>Fastify uses different techniques to optimize its code, many of them are documented in our Guides. We highly recommend you read <a href=/docs/v1.14.x/Plugins-Guide>the hitchhiker&#39;s guide to plugins</a> to discover all the APIs you can use to build your plugin and learn how use them.</p><p>Have you got some question or are you seeking for a suggestion? We are more than happy to help you! Just open an issue in our <a href=https://github.com/fastify/help>help repository</a>.</p><p>Once you submit a plugin to our <a href=/ecosystem>ecosystem list</a>, we will review your code and help you improve it if necessary.</p><h2 id=documentation>Documentation</h2><p>Documentation is extremely important. If your plugin is not well documented we will not accept it to the ecosystem list. Lack of quality documentation makes it more difficult for people to use your plugin, and will likely result in it going unused.<br>If you want to see some good examples on how to document a plugin take a look at:</p><ul><li><a href=https://github.com/fastify/fastify-caching><code>fastify-caching</code></a></li><li><a href=https://github.com/fastify/fastify-compress><code>fastify-compress</code></a></li><li><a href=https://github.com/fastify/fastify-cookie><code>fastify-cookie</code></a></li><li><a href=https://github.com/fastify/point-of-view><code>point-of-view</code></a></li><li><a href=https://github.com/fastify/under-pressure><code>under-pressure</code></a></li></ul><h2 id=license>License</h2><p>You can license your plugin as you prefer, we do not enforce any kind of license.<br>We prefer the <a href=https://choosealicense.com/licenses/mit/ >MIT license</a> because we think it allows more people to use the code freely. For a list of alternative licenses see the <a href=https://opensource.org/licenses>OSI list</a> or GitHub&#39;s <a href=https://choosealicense.com/ >choosealicense.com</a>.</p><h2 id=examples>Examples</h2><p>Always put an example file in your repository. Examples are very helpful for users and give a very fast way to test your plugin. Your users will be grateful.</p><h2 id=test>Test</h2><p>It is extremely important that a plugin is thoroughly tested to verify that is working properly.<br>A plugin without tests will not be accepted to the ecosystem list. A lack of tests does not inspire trust nor guarantee that the code will continue to work among different versions of its dependencies.</p><p>We do not enforce any testing library. We use <a href=http://www.node-tap.org/ ><code>tap</code></a> since it offers out of the box parallel testing and code coverage, but it is up to you to choose your library of preference.</p><h2 id=code-linter>Code Linter</h2><p>It is not mandatory, but we highly recommend you use a code linter in your plugin. It will ensure a consistent code style and help you to avoid many errors.</p><p>We use <a href=https://standardjs.com/ ><code>standard</code></a> since it works without the need to configure it and is very easy integrate in a test suite.</p><h2 id=continuous-integration>Continuous Integration</h2><p>It is not mandatory, but if you release your code as open source it helps to use Continuous Integration to ensure contributions do not break your plugin and to show that the plugin works as intended. <a href=https://travis-ci.org/ >Travis</a> is free for open source projects and easy to setup.<br>In addition you can enable services like <a href=https://greenkeeper.io/ >Greenkeeper</a>, that will help you keep your dependencies up to date and discover if a new release of Fastify has some issues with your plugin.</p><h2 id=lets-start>Let&#39;s start!</h2><p>Awesome, now you know everything you need to know about how to write a good plugin for Fastify! After you&#39;ve built one (or more!) let us know! We will add it to the <a href=https://github.com/fastify/fastify#ecosystem>ecosystem</a> section of our documentation!</p><p>If you want to see some real world examples, checkout:</p><ul><li><a href=https://github.com/fastify/point-of-view><code>point-of-view</code></a> Templates rendering (<em>ejs, pug, handlebars, marko</em>) plugin support for Fastify.</li><li><a href=https://github.com/fastify/fastify-mongodb><code>fastify-mongodb</code></a> Fastify MongoDB connection plugin, with this you can share the same MongoDb connection pool in every part of your server.</li><li><a href=https://github.com/fastify/fastify-multipart><code>fastify-multipart</code></a> Multipart support for Fastify.</li><li><a href=https://github.com/fastify/fastify-helmet><code>fastify-helmet</code></a> Important security headers for Fastify.</li></ul></div><hr><nav class=level><div class=level-left><div class=level-item><a href=/docs/v1.14.x/Benchmarking class="button prev">≪ Benchmarking</a></div></div><div class=level-right><div class=level-item><a href=/docs/v1.14.x/Plugins-Guide class="button next">Plugins Guide ≫</a></div></div></nav></div></div></div></section><script>// dynamically creates a submenu for the current section based on the content headers
  var titles = document.querySelectorAll('#doc-content h3, #doc-content h4')
  var currentMenu = document.getElementById('doc-menu-section')
  if (titles.length && currentMenu) {
    var submenu = document.createElement('ul')
    titles.forEach(el => {
      var currentSubmenuItem = document.createElement('li')
      var currentSubmenuLink = document.createElement('a')
      currentSubmenuLink.href = '#' + el.id
      currentSubmenuLink.title = el.textContent
      currentSubmenuLink.append(document.createTextNode(el.textContent))
      currentSubmenuItem.append(currentSubmenuLink)
      submenu.append(currentSubmenuItem)
    })
    currentMenu.append(submenu)
  }

  // dynamically creates header anchor links
  var headers = document.querySelectorAll('#doc-content h3, #doc-content h4')
  headers.forEach(el => {
    var currentAnchorLink = document.createElement('a')
    currentAnchorLink.className = 'anchor'
    currentAnchorLink.href = "#" + el.id
    currentAnchorLink.append(document.createTextNode('¶'))
    el.insertBefore(currentAnchorLink, el.firstChild);
  })</script></main><footer class="grey is-primary footer"><div class=container><div class="content has-text-centered"><p>Fastify, Copyright &copy; 2016-2021 <a href=https://openjsf.org/ target=_blank rel=noopener>OpenJS Foundation</a> and <a href=https://github.com/fastify/fastify#team target=_blank rel=noopener>The Fastify team</a>, Licensed under <a href=https://github.com/fastify/fastify/blob/master/LICENSE target=_blank rel=noopener>MIT</a></p><p><small>Icons by simpleicons.org</small></p></div></div></footer><script src=/js/main.97eeabf1df4ff87e.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad();</script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script type=text/javascript>docsearch({
        apiKey: 'f7c62ddab40e653f67a6e15be761d951',
        indexName: 'fastify',
        inputSelector: '#algolia-search-input',
        algoliaOptions: { 'facetFilters': ["version:latest", "tags:docs"] },
        debug: false // Set debug to true if you want to inspect the dropdown
      });</script></body></html>
<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Errors</title><meta name=description content="Fast and low overhead web framework, for Node.js"><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.ed24c0a19503e080.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.60c285c424d50738.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-icon-72x72.e49b27cfe1ab1461.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.752f43fc91b8c1f7.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-icon-114x114.61739fa1d5a7059a.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.7c25de37c5ce2ec1.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-icon-144x144.04d88fb27bd92cbe.png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-icon-152x152.9364781175671626.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-icon-180x180.67579100928bfcd2.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.37eb7f1ae3853740.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.1e22f0e774bc3cce.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.7e8a68b1b80c1799.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.e534ce05cb727f1a.png><link rel=manifest href=/manifest.json><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-TileImage content=/images/ms-icon-144x144.png><meta name=theme-color content=#ffffff><meta property=og:url content=https://www.fastify.io/docs/v2.4.x/Errors><meta property=og:type content=website><meta property=og:title content=Errors><meta property=og:description content="Fast and low overhead web framework, for Node.js"><meta property=og:image content=https://www.fastify.io/images/fastify-fb-share-image.07b6e6860853c758.png><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@fastifyjs><meta name=twitter:creator content=@fastifyjs><meta name=twitter:title content=Errors><meta name=twitter:description content="Fast and low overhead web framework, for Node.js"><meta name=twitter:image content=https://www.fastify.io/images/fastify-twitter-share-image.cd9f217b360af3e2.png><link rel=stylesheet href=/css/style.7b9a86078f3cc4f5.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/default.min.css integrity="sha512-kZqGbhf9JTB4bVJ0G8HCkqmaPcRgo88F0dneK30yku5Y/dep7CZfCnNml2Je/sY4lBoqoksXz4PtVXS4GHSUzQ==" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css crossorigin=anonymous><meta name=robots content="noindex, nofollow"></head><body><nav id=main-navbar class=navbar><div class=navbar-brand><a class=navbar-item href=/ ><img src=/images/fastify-logo-menu.d13f8da7a965c800.png alt="Fastify: Fast and low overhead web framework, for Node.js" height=28> </a><a class="navbar-item is-hidden-desktop" href=https://github.com/fastify/fastify target=_blank rel=noopener><span class=icon style="color: #333;"><i class="fa fa-github"></i></span></a><div class="navbar-burger burger" data-target=mobileMenu><span></span> <span></span> <span></span></div></div><div class=navbar-menu id=mobileMenu><div class=navbar-start><a class=navbar-item href=/ >Home</a> <a class=navbar-item href=/docs/latest>Docs</a> <a class=navbar-item href=/ecosystem>Ecosystem</a> <a class=navbar-item href=/benchmarks>Benchmarks</a> <a class=navbar-item href=/contribute>Contribute</a> <a class=navbar-item href=https://medium.com/@fastifyjs/ >Blog</a> <a class=navbar-item href=https://github.com/fastify/help>Help</a></div><div class=navbar-end><span class="control has-icons-left navbar-item"><input id=algolia-search-input class=input type=search placeholder=""> <span class="icon is-medium is-left"><i class="fa fa-search"></i> </span></span><a class=navbar-item href=https://github.com/fastify/fastify target=_blank rel=noopener><span class="fa fa-github"></span>&nbsp;GitHub </a><a class=navbar-item href=https://twitter.com/fastifyjs target=_blank rel=noopener><span class="fa fa-twitter"></span>&nbsp;Twitter</a></div></div></nav><main class=page-content aria-label=Content><section class="hero is-primary" style="background-image: url(/images/bg-pattern-dark.3f8cda863b3bbf52.png)"><div class=hero-body><div class=container><h1 class=title>Documentation (v2.4.1)</h1></div></div></section><section class=section><div class=container><div class=columns><div class="column is-3 is-hidden-mobile" data-sticky-container><aside class="menu sticky"><ul class=menu-list><li style="text-transform: capitalize"><a title=Benchmarking href=/docs/v2.4.x/Benchmarking>Benchmarking</a></li><li style="text-transform: capitalize"><a title=ContentTypeParser href=/docs/v2.4.x/ContentTypeParser>ContentTypeParser</a></li><li style="text-transform: capitalize"><a title=Decorators href=/docs/v2.4.x/Decorators>Decorators</a></li><li style="text-transform: capitalize"><a title=Ecosystem href=/docs/v2.4.x/Ecosystem>Ecosystem</a></li><li style="text-transform: capitalize" id=doc-menu-section><a title=Errors class=is-active href=/docs/v2.4.x/Errors>Errors</a></li><li style="text-transform: capitalize"><a title=Fluent-Schema href=/docs/v2.4.x/Fluent-Schema>Fluent-Schema</a></li><li style="text-transform: capitalize"><a title=Getting-Started href=/docs/v2.4.x/Getting-Started>Getting-Started</a></li><li style="text-transform: capitalize"><a title=HTTP2 href=/docs/v2.4.x/HTTP2>HTTP2</a></li><li style="text-transform: capitalize"><a title=Hooks href=/docs/v2.4.x/Hooks>Hooks</a></li><li style="text-transform: capitalize"><a title=LTS href=/docs/v2.4.x/LTS>LTS</a></li><li style="text-transform: capitalize"><a title=Lifecycle href=/docs/v2.4.x/Lifecycle>Lifecycle</a></li><li style="text-transform: capitalize"><a title=Logging href=/docs/v2.4.x/Logging>Logging</a></li><li style="text-transform: capitalize"><a title=Middlewares href=/docs/v2.4.x/Middlewares>Middlewares</a></li><li style="text-transform: capitalize"><a title=Plugins-Guide href=/docs/v2.4.x/Plugins-Guide>Plugins-Guide</a></li><li style="text-transform: capitalize"><a title=Plugins href=/docs/v2.4.x/Plugins>Plugins</a></li><li style="text-transform: capitalize"><a title=Reply href=/docs/v2.4.x/Reply>Reply</a></li><li style="text-transform: capitalize"><a title=Request href=/docs/v2.4.x/Request>Request</a></li><li style="text-transform: capitalize"><a title=Routes href=/docs/v2.4.x/Routes>Routes</a></li><li style="text-transform: capitalize"><a title=Server href=/docs/v2.4.x/Server>Server</a></li><li style="text-transform: capitalize"><a title=Serverless href=/docs/v2.4.x/Serverless>Serverless</a></li><li style="text-transform: capitalize"><a title=Testing href=/docs/v2.4.x/Testing>Testing</a></li><li style="text-transform: capitalize"><a title=TypeScript href=/docs/v2.4.x/TypeScript>TypeScript</a></li><li style="text-transform: capitalize"><a title=Validation-and-Serialization href=/docs/v2.4.x/Validation-and-Serialization>Validation-and-Serialization</a></li><li style="text-transform: capitalize"><a title=Write-Plugin href=/docs/v2.4.x/Write-Plugin>Write-Plugin</a></li></ul><div class=content style="margin: .8em; border-top: 1px solid #ccc; padding: .8em 0 0 0">Docs version<div class=field><div class=control><div class=select><select onchange="if (this.value) window.location.href=this.value"><option value=/docs/latest>latest</option><option value=/docs/master>master</option><option value=/docs/v3.24.x>v3.24.x</option><option value=/docs/v3.23.x>v3.23.x</option><option value=/docs/v3.22.x>v3.22.x</option><option value=/docs/v3.21.x>v3.21.x</option><option value=/docs/v3.20.x>v3.20.x</option><option value=/docs/v3.19.x>v3.19.x</option><option value=/docs/v3.18.x>v3.18.x</option><option value=/docs/v3.17.x>v3.17.x</option><option value=/docs/v3.16.x>v3.16.x</option><option value=/docs/v3.15.x>v3.15.x</option><option value=/docs/v3.14.x>v3.14.x</option><option value=/docs/v3.13.x>v3.13.x</option><option value=/docs/v3.12.x>v3.12.x</option><option value=/docs/v3.11.x>v3.11.x</option><option value=/docs/v3.10.x>v3.10.x</option><option value=/docs/v3.9.x>v3.9.x</option><option value=/docs/v3.8.x>v3.8.x</option><option value=/docs/v3.7.x>v3.7.x</option><option value=/docs/v3.6.x>v3.6.x</option><option value=/docs/v3.5.x>v3.5.x</option><option value=/docs/v3.4.x>v3.4.x</option><option value=/docs/v3.3.x>v3.3.x</option><option value=/docs/v3.2.x>v3.2.x</option><option value=/docs/v3.1.x>v3.1.x</option><option value=/docs/v3.0.x>v3.0.x</option><option value=/docs/v2.15.x>v2.15.x</option><option value=/docs/v2.14.x>v2.14.x</option><option value=/docs/v2.13.x>v2.13.x</option><option value=/docs/v2.12.x>v2.12.x</option><option value=/docs/v2.11.x>v2.11.x</option><option value=/docs/v2.10.x>v2.10.x</option><option value=/docs/v2.9.x>v2.9.x</option><option value=/docs/v2.8.x>v2.8.x</option><option value=/docs/v2.7.x>v2.7.x</option><option value=/docs/v2.6.x>v2.6.x</option><option value=/docs/v2.5.x>v2.5.x</option><option selected value=/docs/v2.4.x>v2.4.x</option><option value=/docs/v2.3.x>v2.3.x</option><option value=/docs/v2.2.x>v2.2.x</option><option value=/docs/v2.1.x>v2.1.x</option><option value=/docs/v2.0.x>v2.0.x</option><option value=/docs/v1.14.x>v1.14.x</option><option value=/docs/v1.13.x>v1.13.x</option></select></div></div></div></div></aside></div><div class="column is-9"><nav class=breadcrumb><ul><li><a href=/ style="padding-left: 0">Fastify</a></li><li><a href=/docs/ >Documentation</a></li><li><div class=field><div class=control><div class=select><select onchange="if (this.value) window.location.href=this.value" style="border: none;"><option value=/docs/latest>latest</option><option value=/docs/master>master</option><option value=/docs/v3.24.x>v3.24.x</option><option value=/docs/v3.23.x>v3.23.x</option><option value=/docs/v3.22.x>v3.22.x</option><option value=/docs/v3.21.x>v3.21.x</option><option value=/docs/v3.20.x>v3.20.x</option><option value=/docs/v3.19.x>v3.19.x</option><option value=/docs/v3.18.x>v3.18.x</option><option value=/docs/v3.17.x>v3.17.x</option><option value=/docs/v3.16.x>v3.16.x</option><option value=/docs/v3.15.x>v3.15.x</option><option value=/docs/v3.14.x>v3.14.x</option><option value=/docs/v3.13.x>v3.13.x</option><option value=/docs/v3.12.x>v3.12.x</option><option value=/docs/v3.11.x>v3.11.x</option><option value=/docs/v3.10.x>v3.10.x</option><option value=/docs/v3.9.x>v3.9.x</option><option value=/docs/v3.8.x>v3.8.x</option><option value=/docs/v3.7.x>v3.7.x</option><option value=/docs/v3.6.x>v3.6.x</option><option value=/docs/v3.5.x>v3.5.x</option><option value=/docs/v3.4.x>v3.4.x</option><option value=/docs/v3.3.x>v3.3.x</option><option value=/docs/v3.2.x>v3.2.x</option><option value=/docs/v3.1.x>v3.1.x</option><option value=/docs/v3.0.x>v3.0.x</option><option value=/docs/v2.15.x>v2.15.x</option><option value=/docs/v2.14.x>v2.14.x</option><option value=/docs/v2.13.x>v2.13.x</option><option value=/docs/v2.12.x>v2.12.x</option><option value=/docs/v2.11.x>v2.11.x</option><option value=/docs/v2.10.x>v2.10.x</option><option value=/docs/v2.9.x>v2.9.x</option><option value=/docs/v2.8.x>v2.8.x</option><option value=/docs/v2.7.x>v2.7.x</option><option value=/docs/v2.6.x>v2.6.x</option><option value=/docs/v2.5.x>v2.5.x</option><option selected value=/docs/v2.4.x>v2.4.x</option><option value=/docs/v2.3.x>v2.3.x</option><option value=/docs/v2.2.x>v2.2.x</option><option value=/docs/v2.1.x>v2.1.x</option><option value=/docs/v2.0.x>v2.0.x</option><option value=/docs/v1.14.x>v1.14.x</option><option value=/docs/v1.13.x>v1.13.x</option></select></div></div></div></li><li style="text-transform: capitalize" class=is-active><a>Errors</a></li></ul></nav><div id=doc-content class=content><p><a id=errors></a></p><h2 id=errors>Errors</h2><p><a name=error-handling></a></p><h3 id=error-handling>Error Handling</h3><p>Uncaught errors are likely to cause memory leaks, file descriptor leaks and other major production issues. <a href=https://nodejs.org/en/docs/guides/domain-postmortem/ >Domains</a> were introduced to try fixing this issue, but they did not. Given the fact that it is not possible to process all uncaught errors in a sensible way, the best way to deal with them at the moment is to <a href=https://nodejs.org/api/process.html#process_warning_using_uncaughtexception_correctly>crash</a>. In case of promises, make sure to <a href=https://nodejs.org/dist/latest-v8.x/docs/api/deprecations.html#deprecations_dep0018_unhandled_promise_rejections>handle</a> errors <a href=https://github.com/mcollina/make-promises-safe>correctly</a>.</p><p>Fastify follows an all-or-nothing approach and aims to be lean and optimal as much as possible. Thus, the developer is responsible for making sure that the errors are handled properly. Most of the errors are usually a result of unexpected input data, so we recommend specifying a <a href=/docs/v2.4.x/Validation-and-Serialization>JSON.schema validation</a> for your input data.</p><p>Note that Fastify doesn&#39;t catch uncaught errors within callback based routes for you, so any uncaught errors will result in a crash. If routes are declared as <code>async</code> though - the error will safely be caught by the promise and routed to the default error handler of Fastify for a generic <code>Internal Server Error</code> response. For customizing this behavior, you should use <a href=/docs/v2.4.x/Server#seterrorhandler>setErrorHandler</a>.</p><p><a name=fastify-error-codes></a></p><h3 id=fastify-error-codes>Fastify Error Codes</h3><p><a name=FST_ERR_CTP_ALREADY_PRESENT></a></p><h4 id=fst_err_ctp_already_present>FST_ERR_CTP_ALREADY_PRESENT</h4><p>The parser for this content type was already registered.</p><p><a name=FST_ERR_CTP_INVALID_TYPE></a></p><h4 id=fst_err_ctp_invalid_type>FST_ERR_CTP_INVALID_TYPE</h4><p>The content type should be a string.</p><p><a name=FST_ERR_CTP_EMPTY_TYPE></a></p><h4 id=fst_err_ctp_empty_type>FST_ERR_CTP_EMPTY_TYPE</h4><p>The content type cannot be an empty string.</p><p><a name=FST_ERR_CTP_INVALID_HANDLER></a></p><h4 id=fst_err_ctp_invalid_handler>FST_ERR_CTP_INVALID_HANDLER</h4><p>An invalid handler was passed for the content type.</p><p><a name=FST_ERR_CTP_INVALID_PARSE_TYPE></a></p><h4 id=fst_err_ctp_invalid_parse_type>FST_ERR_CTP_INVALID_PARSE_TYPE</h4><p>The provided parse type is not supported. Accepted values are <code>string</code> or <code>buffer</code>.</p><p><a name=FST_ERR_CTP_BODY_TOO_LARGE></a></p><h4 id=fst_err_ctp_body_too_large>FST_ERR_CTP_BODY_TOO_LARGE</h4><p>Request body is larger than the provided limit.</p><p><a name=FST_ERR_CTP_INVALID_MEDIA_TYPE></a></p><h4 id=fst_err_ctp_invalid_media_type>FST_ERR_CTP_INVALID_MEDIA_TYPE</h4><p>Received media type is not supported (i.e. there is no suitable content-type parser for it).</p><p><a name=FST_ERR_CTP_INVALID_CONTENT_LENGTH></a></p><h4 id=fst_err_ctp_invalid_content_length>FST_ERR_CTP_INVALID_CONTENT_LENGTH</h4><p>Request body size did not match Content-Length.</p><p><a name=FST_ERR_DEC_ALREADY_PRESENT></a></p><h4 id=fst_err_dec_already_present>FST_ERR_DEC_ALREADY_PRESENT</h4><p>A decorator with the same name is already registered.</p><p><a name=FST_ERR_DEC_MISSING_DEPENDENCY></a></p><h4 id=fst_err_dec_missing_dependency>FST_ERR_DEC_MISSING_DEPENDENCY</h4><p>The decorator cannot be registered due to a missing dependency.</p><p><a name=FST_ERR_HOOK_INVALID_TYPE></a></p><h4 id=fst_err_hook_invalid_type>FST_ERR_HOOK_INVALID_TYPE</h4><p>The hook name must be a string.</p><p><a name=FST_ERR_HOOK_INVALID_HANDLER></a></p><h4 id=fst_err_hook_invalid_handler>FST_ERR_HOOK_INVALID_HANDLER</h4><p>The hook callback must be a function.</p><p><a name=FST_ERR_LOG_INVALID_DESTINATION></a></p><h4 id=fst_err_log_invalid_destination>FST_ERR_LOG_INVALID_DESTINATION</h4><p>Logger acceptes either a <code>&#39;stream&#39;</code> or a <code>&#39;file&#39;</code> as the destination.</p><p><a id=FST_ERR_REP_ALREADY_SENT></a></p><h3 id=fst_err_rep_already_sent>FST_ERR_REP_ALREADY_SENT</h3><p>A response was already sent.</p><p><a id=FST_ERR_SEND_INSIDE_ONERR></a></p><h4 id=fst_err_send_inside_onerr>FST_ERR_SEND_INSIDE_ONERR</h4><p>You cannot use <code>send</code> inside the <code>onError</code> hook.</p><p><a name=FST_ERR_REP_INVALID_PAYLOAD_TYPE></a></p><h4 id=fst_err_rep_invalid_payload_type>FST_ERR_REP_INVALID_PAYLOAD_TYPE</h4><p>Reply payload can either be a <code>string</code> or a <code>Buffer</code>.</p><p><a name=FST_ERR_SCH_MISSING_ID></a></p><h4 id=fst_err_sch_missing_id>FST_ERR_SCH_MISSING_ID</h4><p>The schema provided does not have <code>$id</code> property.</p><p><a name=FST_ERR_SCH_ALREADY_PRESENT></a></p><h4 id=fst_err_sch_already_present>FST_ERR_SCH_ALREADY_PRESENT</h4><p>A schema with the same <code>$id</code> already exists.</p><p><a name=FST_ERR_SCH_NOT_PRESENT></a></p><h4 id=fst_err_sch_not_present>FST_ERR_SCH_NOT_PRESENT</h4><p>No schema with the provided <code>$id</code> exists.</p><p><a name=FST_ERR_PROMISE_NOT_FULLFILLED></a></p><h4 id=fst_err_promise_not_fullfilled>FST_ERR_PROMISE_NOT_FULLFILLED</h4><p>Promise may not be fulfilled with &#39;undefined&#39; when statusCode is not 204.</p></div><hr><nav class=level></nav></div></div></div></section><script>// dynamically creates a submenu for the current section based on the content headers
  var titles = document.querySelectorAll('#doc-content h3, #doc-content h4')
  var currentMenu = document.getElementById('doc-menu-section')
  if (titles.length && currentMenu) {
    var submenu = document.createElement('ul')
    titles.forEach(el => {
      var currentSubmenuItem = document.createElement('li')
      var currentSubmenuLink = document.createElement('a')
      currentSubmenuLink.href = '#' + el.id
      currentSubmenuLink.title = el.textContent
      currentSubmenuLink.append(document.createTextNode(el.textContent))
      currentSubmenuItem.append(currentSubmenuLink)
      submenu.append(currentSubmenuItem)
    })
    currentMenu.append(submenu)
  }

  // dynamically creates header anchor links
  var headers = document.querySelectorAll('#doc-content h3, #doc-content h4')
  headers.forEach(el => {
    var currentAnchorLink = document.createElement('a')
    currentAnchorLink.className = 'anchor'
    currentAnchorLink.href = "#" + el.id
    currentAnchorLink.append(document.createTextNode('Â¶'))
    el.insertBefore(currentAnchorLink, el.firstChild);
  })</script></main><footer class="grey is-primary footer"><div class=container><div class="content has-text-centered"><p>Fastify, Copyright &copy; 2016-2021 <a href=https://openjsf.org/ target=_blank rel=noopener>OpenJS Foundation</a> and <a href=https://github.com/fastify/fastify#team target=_blank rel=noopener>The Fastify team</a>, Licensed under <a href=https://github.com/fastify/fastify/blob/master/LICENSE target=_blank rel=noopener>MIT</a></p><p><small>Icons by simpleicons.org</small></p></div></div></footer><script src=/js/main.a784d8baa3d1a953.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js integrity="sha512-s+tOYYcC3Jybgr9mVsdAxsRYlGNq4mlAurOrfNuGMQ/SCofNPu92tjE7YRZCsdEtWL1yGkqk15fU/ark206YTg==" crossorigin=anonymous></script><script>hljs.highlightAll();</script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script type=text/javascript>docsearch({
        apiKey: 'f7c62ddab40e653f67a6e15be761d951',
        indexName: 'fastify',
        inputSelector: '#algolia-search-input',
        algoliaOptions: { 'facetFilters': ["version:latest", "tags:docs"] },
        debug: false // Set debug to true if you want to inspect the dropdown
      });</script></body></html>
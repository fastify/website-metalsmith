<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>How to write a good plugin</title>
  <meta name="description" content="Fast and low overhead web framework, for Node.js">

  <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/images/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.1/css/bulma.min.css" integrity="sha256-CDVQJfU+jJGU/oyDzvnzuGXbv0rz+SyBsPQwyn7x/jQ=" crossorigin="anonymous" />
  <link rel="stylesheet" href="/css/style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />

  

  
</head>


  <body>
    <nav id="main-navbar" class="navbar">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/images/fastify-logo-menu.png" alt="Fastify: Fast and low overhead web framework, for Node.js" height="28">
    </a>

    <a class="navbar-item is-hidden-desktop" href="https://github.com/fastify/fastify" target="_blank">
      <span class="icon" style="color: #333;">
        <i class="fa fa-github"></i>
      </span>
    </a>

    <div class="navbar-burger burger" data-target="mobileMenu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div class="navbar-menu" id="mobileMenu">
    <div class="navbar-start">
      <a class="navbar-item " href="/">Home</a>
      <a class="navbar-item " href="/docs/latest">Docs</a>
      <a class="navbar-item " href="/ecosystem">Ecosystem</a>
      <a class="navbar-item " href="/benchmarks">Benchmarks</a>
      <a class="navbar-item " href="https://github.com/fastify/help">Help</a>
    </div>

    <div class="navbar-end">
      <a class="navbar-item" href="https://github.com/fastify/fastify" target="_blank">
        <span class="fa fa-github"> </span>&nbsp;Github
      </a>
      <a class="navbar-item" href="https://twitter.com/fastifyjs" target="_blank">
        <span class="fa fa-twitter"> </span>&nbsp;Twitter
      </a>
    </div>
  </div>
</nav>


    <main class="page-content" aria-label="Content">
      
<section class="hero is-primary" style="background-image: url('/images/bg-pattern-bright.png')">
  <div class="hero-body">
      <div class="container">
        <h1 class="title">
          Documentation
        </h1>
      </div>
  </div>
</section>

<div class="container">
  <section class="section">
    <div class="columns">

      <div class="column is-3 is-hidden-mobile" data-sticky-container>
        <aside class="menu sticky">
          <p class="menu-label">
            Table of contents
          </p>
          <ul class="menu-list">
            
              <li >
                <a  href="/docs/master/Getting-Started">Getting Started</a>
              </li>
            
              <li >
                <a  href="/docs/master/Server-Methods">Server Methods</a>
              </li>
            
              <li >
                <a  href="/docs/master/Routes">Routes</a>
              </li>
            
              <li >
                <a  href="/docs/master/Logging">Logging</a>
              </li>
            
              <li >
                <a  href="/docs/master/Middlewares">Middlewares</a>
              </li>
            
              <li >
                <a  href="/docs/master/Hooks">Hooks</a>
              </li>
            
              <li >
                <a  href="/docs/master/Decorators">Decorators</a>
              </li>
            
              <li >
                <a  href="/docs/master/Validation-and-Serialization">Validation and Serialization</a>
              </li>
            
              <li >
                <a  href="/docs/master/Lifecycle">Lifecycle</a>
              </li>
            
              <li >
                <a  href="/docs/master/Reply">Reply</a>
              </li>
            
              <li >
                <a  href="/docs/master/Request">Request</a>
              </li>
            
              <li >
                <a  href="/docs/master/ContentTypeParser">Content Type Parser</a>
              </li>
            
              <li >
                <a  href="/docs/master/Factory">Factory</a>
              </li>
            
              <li >
                <a  href="/docs/master/Plugins">Plugins</a>
              </li>
            
              <li >
                <a  href="/docs/master/Testing">Testing</a>
              </li>
            
              <li >
                <a  href="/docs/master/Benchmarking">Benchmarking</a>
              </li>
            
              <li id="doc-menu-section">
                <a class="is-active" href="/docs/master/Write-Plugin">How to write a good plugin</a>
              </li>
            
              <li >
                <a  href="/docs/master/Plugins-Guide">Plugins Guide</a>
              </li>
            
              <li >
                <a  href="/docs/master/HTTP2">HTTP2</a>
              </li>
            
              <li >
                <a  href="/docs/master/LTS">Long Term Support</a>
              </li>
            
              <li >
                <a  href="/docs/master/TypeScript">TypeScript and types support</a>
              </li>
            
          </ul>
          <div class="content" style="margin: .8em; border-top: 1px solid #ccc; padding: .8em 0 0 0">
            Docs version
            <div class="field">
              <div class="control">
                <div class="select">
                  <select onchange="if (this.value) window.location.href=this.value">
                    
                      
                        
                        
                          <option selected="selected" value="/docs/master">master</option>
                      
                    
                      
                        
                        
                          
                        
                          <option  value="/docs/v1.7.x">v1.7.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.6.x">v1.6.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.5.x">v1.5.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.4.x">v1.4.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.3.x">v1.3.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.2.x">v1.2.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.1.x">v1.1.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v1.0.x">v1.0.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.43.x">v0.43.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.42.x">v0.42.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.41.x">v0.41.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.40.x">v0.40.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.39.x">v0.39.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.38.x">v0.38.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.37.x">v0.37.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.36.x">v0.36.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.35.x">v0.35.x</option>
                      
                    
                      
                    
                  </select>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <div class="column">
        <nav class="breadcrumb">
          <ul>
            <li><a href="/" style="padding-left: 0">Fastify</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li>
              <div class="field">
                <div class="control">
                  <div class="select">
                    <select onchange="if (this.value) window.location.href=this.value" style="border: none;">
                      
                        
                          
                          <option selected="selected" value="/docs/master">master</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.7.x">v1.7.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.6.x">v1.6.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.5.x">v1.5.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.4.x">v1.4.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.3.x">v1.3.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.2.x">v1.2.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.1.x">v1.1.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v1.0.x">v1.0.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.43.x">v0.43.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.42.x">v0.42.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.41.x">v0.41.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.40.x">v0.40.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.39.x">v0.39.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.38.x">v0.38.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.37.x">v0.37.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.36.x">v0.36.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.35.x">v0.35.x</option>
                        
                      
                        
                      
                    </select>
                  </div>
                </div>
              </div>
            </li>
            <li class="is-active"><a>How to write a good plugin</a></li>
          </ul>
        </nav>

        <div id="doc-content" class="content">
          <h1 id="how-to-write-a-good-plugin">How to write a good plugin</h1>
<p>First, thank you for deciding to write a plugin for Fastify. Fastify is a minimal framework and plugins are its strength, so thank you.<br>
The core principles of Fastify are performance, low overhead and providing a good experience to our users. When writing a plugin, it is important to keep these principles in mind. Therefore, in this document we will analyze what characterizes a quality plugin.</p>
<p><em>Need some inspiration? You can use the label <a href="https://github.com/fastify/fastify/issues?q=is%3Aissue+is%3Aopen+label%3A%22plugin+suggestion%22">&quot;plugin suggestion&quot;</a> in our issue tracker!</em></p>
<h2 id="code">Code</h2>
<p>Fastify uses different techniques to optimize its code, many of them are documented in our Guides. We highly recommend you read <a href="/docs/master/Plugins-Guide">the hitchhiker&#39;s guide to plugins</a> to discover all the APIs you can use to build your plugin and learn how use them.</p>
<p>Have you got some question or are you seeking for a suggestion? We are more than happy to help you! Just open an issue in our <a href="https://github.com/fastify/help">help repository</a>.</p>
<p>Once you submit a plugin to our <a href="/ecosystem">ecosystem list</a>, we will review your code and help you improve it if necessary.</p>
<h2 id="documentation">Documentation</h2>
<p>Documentation is extremely important. If your plugin is not well documented we will not accept it to the ecosystem list. Lack of quality documentation makes it more difficult for people to use your plugin, and will likely result in it going unused.<br>
If you want to see some good examples on how to document a plugin take a look at:</p>
<ul>
<li><a href="https://github.com/fastify/fastify-caching"><code>fastify-caching</code></a></li>
<li><a href="https://github.com/fastify/fastify-compress"><code>fastify-compress</code></a></li>
<li><a href="https://github.com/fastify/fastify-cookie"><code>fastify-cookie</code></a></li>
<li><a href="https://github.com/fastify/point-of-view"><code>point-of-view</code></a></li>
<li><a href="https://github.com/fastify/under-pressure"><code>under-pressure</code></a></li>
</ul>
<h2 id="license">License</h2>
<p>You can license your plugin as you prefer, we do not enforce any kind of license.<br>
We prefer the <a href="https://choosealicense.com/licenses/mit/">MIT license</a> because we think it allows more people to use the code freely. For a list of alternative licenses see the <a href="https://opensource.org/licenses">OSI list</a> or GitHub&#39;s <a href="https://choosealicense.com/">choosealicense.com</a>.</p>
<h2 id="examples">Examples</h2>
<p>Always put an example file in your repository. Examples are very helpful for users and give a very fast way to test your plugin. Your users will be grateful.</p>
<h2 id="test">Test</h2>
<p>It is extremely important that a plugin is thoroughly tested to verify that is working properly.<br>
A plugin without tests will not be accepted to the ecosystem list. A lack of tests does not inspire trust nor guarantee that the code will continue to work among different versions of its dependencies.</p>
<p>We do not enforce any testing library. We use <a href="http://www.node-tap.org/"><code>tap</code></a> since it offers out of the box parallel testing and code coverage, but it is up to you to choose your library of preference.</p>
<h2 id="code-linter">Code Linter</h2>
<p>It is not mandatory, but we highly recommend you use a code linter in your plugin. It will ensure a consistent code style and help you to avoid many errors.</p>
<p>We use <a href="https://standardjs.com/"><code>standard</code></a> since it works without the need to configure it and is very easy integrate in a test suite.</p>
<h2 id="continuous-integration">Continuous Integration</h2>
<p>It is not mandatory, but if you release your code as open source it helps to use Continuous Integration to ensure contributions do not break your plugin and to show that the plugin works as intended. <a href="https://travis-ci.org/">Travis</a> is free for open source projects and easy to setup.<br>
In addition you can enable services like <a href="https://greenkeeper.io/">Greenkeeper</a>, that will help you keep your dependencies up to date and discover if a new release of Fastify has some issues with your plugin.</p>
<h2 id="let-s-start-">Let&#39;s start!</h2>
<p>Awesome, now you know everything you need to know about how to write a good plugin for Fastify!
After you&#39;ve built one (or more!) let us know! We will add it to the <a href="https://github.com/fastify/fastify#ecosystem">ecosystem</a> section of our documentation!</p>
<p>If you want to see some real world examples, checkout:</p>
<ul>
<li><a href="https://github.com/fastify/point-of-view"><code>point-of-view</code></a>
Templates rendering (<em>ejs, pug, handlebars, marko</em>) plugin support for Fastify.</li>
<li><a href="https://github.com/fastify/fastify-mongodb"><code>fastify-mongodb</code></a>
Fastify MongoDB connection plugin, with this you can share the same MongoDb connection pool in every part of your server.</li>
<li><a href="https://github.com/fastify/fastify-multipart"><code>fastify-multipart</code></a>
Multipart support for Fastify.</li>
<li><a href="https://github.com/fastify/fastify-helmet"><code>fastify-helmet</code></a> Important security headers for Fastify.</li>
</ul>

        </div>

        <hr/>
        <nav class="level">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <div class="level-left">
              <div class="level-item">
                
                  
                  
                  <a href="/docs/master/Benchmarking" class="button prev">≪ Benchmarking</a>
                
              </div>
            </div>
            <div class="level-right">
              <div class="level-item">
                
                  
                  
                  <a href="/docs/master/Plugins-Guide" class="button next">Plugins Guide ≫</a>
                
              </div>
            </div>
          
        
          
        
          
        
          
        
          
        
        </nav>
      </div>
    </div>
  </section>

  <script>
    // dynamically creates a submenu for the current section based on the content headers
    var titles = document.querySelectorAll('#doc-content h3, #doc-content h4')
    var currentMenu = document.getElementById('doc-menu-section')
    if (titles.length && currentMenu) {
      var submenu = document.createElement('ul')
      titles.forEach(el => {
        var currentSubmenuItem = document.createElement('li')
        var currentSubmenuLink = document.createElement('a')
        currentSubmenuLink.href = '#' + el.id
        currentSubmenuLink.append(document.createTextNode(el.textContent))
        currentSubmenuItem.append(currentSubmenuLink)
        submenu.append(currentSubmenuItem)
      })
      currentMenu.append(submenu)
    }

    // dynamically creates header anchor links
    var headers = document.querySelectorAll('#doc-content h3, #doc-content h4')
    headers.forEach(el => {
      var currentAnchorLink = document.createElement('a')
      currentAnchorLink.className = 'anchor'
      currentAnchorLink.href = "#" + el.id
      currentAnchorLink.append(document.createTextNode('¶'))
      el.insertBefore(currentAnchorLink, el.firstChild);
    })
  </script>
</div>

    </main>

    <footer class="grey is-primary footer">
  <div class="container">
    <div class="content has-text-centered">
    
      <p><em>Found a typo or want to improve this page?</em> <a href="https://github.com/fastify/fastify/blob/master/docs/Write-Plugin.md">Submit a PR on GitHub</a></p>
    
      <p>Fastify, Copyright &copy; 2016-2017 Matteo Collina and the <a href="https://github.com/fastify/fastify#team" target="_blank">Fastify team</a>, Licensed under <a href="https://github.com/fastify/fastify/blob/master/LICENSE" target="_blank">MIT</a></p>
    </div>
  </div>
</footer>


    <script src="/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
  </body>

</html>
